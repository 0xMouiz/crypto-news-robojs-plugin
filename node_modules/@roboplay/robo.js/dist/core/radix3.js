const c={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function D(t={}){const n={options:t,rootNode:x(),staticRoutesMap:{}},i=e=>t.strictTrailingSlash?e:e.replace(/\/$/,"")||"/";if(t.routes)for(const e in t.routes)N(n,i(e),t.routes[e]);return {ctx:n,lookup:e=>p(n,i(e)),insert:(e,o)=>N(n,i(e),o),remove:e=>f(n,i(e))}}function p(t,n){const i=t.staticRoutesMap[n];if(i)return i.data;const e=n.split("/"),o={};let d=!1,l=null,a=t.rootNode,r=null;for(let s=0;s<e.length;s++){const u=e[s];a.wildcardChildNode!==null&&(l=a.wildcardChildNode,r=e.slice(s).join("/"));const R=a.children.get(u);if(R!==void 0)a=R;else if(a=a.placeholderChildNode,a!==null)o[a.paramName]=u,d=!0;else break}return (a===null||a.data===null)&&l!==null&&(a=l,o[a.paramName||"_"]=r,d=!0),a?d?{...a.data,params:d?o:void 0}:a.data:null}function N(t,n,i){let e=!0;const o=n.split("/");let d=t.rootNode,l=0;for(const a of o){let r;if(r=d.children.get(a))d=r;else {const s=h(a);r=x({type:s,parent:d}),d.children.set(a,r),s===c.PLACEHOLDER?(r.paramName=a==="*"?`_${l++}`:a.slice(1),d.placeholderChildNode=r,e=!1):s===c.WILDCARD&&(d.wildcardChildNode=r,r.paramName=a.slice(3)||"_",e=!1),d=r;}}return d.data=i,e===!0&&(t.staticRoutesMap[n]=d),d}function f(t,n){let i=!1;const e=n.split("/");let o=t.rootNode;for(const d of e)if(o=o.children.get(d),!o)return i;if(o.data){const d=e[e.length-1];if(o.data=null,Object.keys(o.children).length===0){const l=o.parent;l.children.delete(d),l.wildcardChildNode=null,l.placeholderChildNode=null;}i=!0;}return i}function x(t={}){return {type:t.type||c.NORMAL,parent:t.parent||null,children:new Map,data:t.data||null,paramName:t.paramName||null,wildcardChildNode:null,placeholderChildNode:null}}function h(t){return t.startsWith("**")?c.WILDCARD:t[0]===":"||t==="*"?c.PLACEHOLDER:c.NORMAL}

export { c as NODE_TYPES, D as createRouter };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=radix3.js.map